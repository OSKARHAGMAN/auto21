pipeline {
        agent any
            stages{
                stage('Checkout'){
                    steps{
                        git 'https://github.com/OSKARHAGMAN/auto21.git'
                    }
                }
            stage ('Build'){
                steps {
                    bat 'mvn compile'
                   }
                }
            stage ('Test'){
                steps {
                    bat 'mvn test'
                }
               
            post {
                always{
                    junit '**/TEST*.xml'
                }
             }
           }
                        stage('newman') {
                                    steps {
                                        sh 'newman run Oskar_Hagman_MT21.postman_collection --environment Oskar_Hagman_MT21_Env.postman_environment --reporters junit'
                                    }
                                    post {
                                        always {
                                                junit '**/*xml'
                                            }
                                        }
                                }
        }
    }